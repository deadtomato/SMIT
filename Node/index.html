<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Конфигурация проекта. Node.js и Gulp</title>
  <link rel="preload" href="fonts/open-sans-v17-latin_cyrillic-regular.woff2" as="font" crossorigin="anonymous">
  <link rel="preload" href="fonts/open-sans-v17-latin_cyrillic-italic.woff2" as="font" crossorigin="anonymous">
  <link rel="preload" href="fonts/open-sans-v17-latin_cyrillic-800.woff2" as="font" crossorigin="anonymous">
  <link rel="preload" href="fonts/fira-code-v8-latin_cyrillic-regular.woff2" as="font" crossorigin="anonymous">
  <link rel="preload" href="fonts/fira-code-v8-latin_cyrillic-700.woff2" as="font" crossorigin="anonymous">
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <header class="page-header"></header>
  <main class="page-content">
    <div class="container">
      <h1 class="page-content__title">Конфигурация проекта. Node.js и Gulp</h1>
      <article class="article">
        <h2 class="visually-hidden">Автоматизация</h2>
        <ul class="article__menu no-list">
          <li class="article__menu-item">
            <a href="#nodejs" class="article__menu-link">Node.js</a>
          </li>
          <li class="article__menu-item">
            <a href="#npminit" class="article__menu-link">Инициализация npm-пакета</a>
          </li>
          <li class="article__menu-item">
            <a href="#gulpinstall" class="article__menu-link">Установка Gulp</a>
          </li>
          <li class="article__menu-item">
            <a href="#proj" class="article__menu-link">Структура проекта</a>
          </li>
          <li class="article__menu-item">
            <a href="#plugins" class="article__menu-link">Устанавливаем Gulp-плагины</a>
          </li>
          <li class="article__menu-item">
            <a href="#tasks" class="article__menu-link">Пишем tasks</a>
          </li>
          <li class="article__menu-item">
            <a href="#start" class="article__menu-link">Запускаем сервер</a>
          </li>
        </ul>
        <ul class="article__list no-list">
          <li class="article__item" id="nodejs">
            <h3 class="article__title">Node.js</h3>
            <p class="article__text">Первым делом нам понадобится <b>Node.js</b> - это, по сути, интерпретатор
              JavaScript.
            </p>
            <p class="article__text">Обычно мы запускали скрипты в браузере и все было отлично! Однако, есть возможность
              исполнять js вне браузера. И как раз Node позволяет нам это сделать.</p>
            <p class="article__text">Сначала надо установить его на свой компьютер.
              Идем на сайт <a class="article__link" href="https://nodejs.org/" target="_blank">Node.js</a> и качаем
              <b>Node</b> для своей системы.
              <p class="article__text">Качать
                лучше <b>LTS</b> <i>(англ. Long-Term Support; дословно «поддержка в течение длительного периода»)</i>.
                <p class="article__text">Далее
                  устанавливаем.</p>
                После этого открываем консоль и вводим <code>node -v</code></p>
              <figure>
                <img class="article__img" src="img/image16.png" width="500" height="353" alt="версия nodejs 12.16.1">
              </figure>
              <p class="article__text">Эта команда покажет нам версию <b>Node.js</b>.</p>
              <p class="article__text">Если на этом этапе в консоли выводится сообщение об ошибке, значит
                возникли проблемы с установкой, необходимо повторить установку.</p>
              <p class="article__text">Далее вводим в консоли <code>npm -v</code> Видим также версию npm.</p>
              <figure>
                <img class="article__img" src="img/image9.png" width="500" height="353" alt="версия npm 6.14.3">
              </figure>

              <p class="article__text">Пару слов о <b>npm</b>.</p>
              <p class="article__text"><b>Npm</b> - это пакетный менеджер. Программа, позволяющая загружать,
                устанавливать и
                использовать пакеты, по сути, другие программы, написанный кем-то до нас и выложенные в открытый доступ.
              </p>
              <p class="article__text">Пакеты можно найти на сайте <a class="article__link"
                  href="https://www.npmjs.com/" target="_blank">npm</a>.
                На этом этапе мы установили <b>Node.js</b> на наш компьютер.</p>
              <p class="article__text">Пришло время подготовки нашего проекта.</p>
          </li>
          <li class="article__item" id="npminit">
            <h3 class="article__title">Инициализация npm-пакета</h3>
            <p class="article__text">В нашей рабочей директории создаем новую папку, дадим ей какое-нибудь имя. Я назову
              ее <b>Node_Gulp</b>.</p>
            <p class="article__text">Перейдем в нее и воспользуемся командой <code>npm init</code> для инициализации
              нашего проекта.</p>
            <figure>
              <img class="article__img" src="img/image31.png" width="500" height="353" alt="Инициализация npm-пакета">
            </figure>

            <p class="article__text"><b>Npm</b> предлагает нам настроить наш проект (пакет), указав имя, версию,
              описание
              и т.д.</p>
            <p class="article__text">На этом этапе можно ничего не вводить, просто нажимаем <code>Enter</code> на каждом
              шаге.</p>
            <p class="article__text">Затем <b>npm</b> демонстрирует нам файл package.json с нашими настройками, которые
              мы
              благополучно проигнорировали и спрашивает: <i>“Все ли в порядке?”</i> Подтверждаем, пишем
              <code>yes</code>
            </p>

            <figure>
              <img class="article__img" src="img/image17.png" width="500" height="353" alt="Инициализация npm-пакета">
            </figure>

            <p class="article__text">Далее видим в нашей папке файл <span class="article__file">package.json.</span>
              Можно просмотреть его содержимое командой <code>cat package.json</code></p>
            <figure>
              <img class="article__img" src="img/image14.png" width="500" height="353" alt="Инициализация npm-пакета">
            </figure>
            <p class="article__text">Ок! Значит наш проект-пакет создан, можно смело продолжать настройку!</p>
          </li>
          <li class="article__item" id="gulpinstall">
            <h3 class="article__title">Установка Gulp</h3>
            <p class="article__text">Далее нам понадобится <a href=" https://gulpjs.com/" class="article__link"
                target="_blank">Gulp</a>. Это так называемый task-runner! Тот самый парень, который будет выполнять за
              нас всю грязную работу.</p>
            <p class="article__text">Для начала надо его установить.</p>
            <p class="article__text">На главной странице сайта <b>Gulp</b> видим ряд команд, которые позволяют нам его
              установить. Первым делом выполняем <code>npm install gulp-cli -g</code></p>
            <p class="article__text">Вероятно, возникнут ошибки при его установки, все дело в том, что мы должны
              устанавливать его с правами администратора! Пишем: <code>sudo npm install gulp-cli -g</code></p>

            <p class="article__text">Эта команда устанавливает не сам <b>Gulp</b>, а его <b>CLI</b> <i>(Command Line
                Interface)</i> - интерфейс командной строки. Следом устанавливаем сам <b>Gulp</b>
              <code>npm install gulp -D</code></p>
            <figure>
              <img class="article__img" src="img/image5.png" width="500" height="353" alt="Установка Gulp">
            </figure>

            <p class="article__text">Установка завершена! Хорошо.</p>

            <figure>
              <img class="article__img" src="img/image32.png" width="500" height="353" alt="Установка Gulp">
            </figure>

            <p class="article__text">Если в консоли набрать <code>ls</code> то мы увидим, что теперь помимо package.json
              у
              нас появились еще папка <span class="article__file">node_modules</span> и <span
                class="article__file">package-lock.json</span>. Что это такое? </p>
            <p class="article__text">В <span class="article__file">node_modules</span> находятся исходные файлы
              установленных пакетов.</p>
            <p class="article__text">А вот функции <span class="article__file">package-lock.json</span> не так просты,
              чтобы описать его парой слов. Однако, я нашел такое определение: <blockquote>Lock-файл — это моментальный снимок
                всего дерева зависимостей, включающий все пакеты и их установленные версии.</blockquote></p>
            <p class="article__text">Для тех кто хочет все-таки разобраться <a class="article__link"
                href="https://medium.com/devschacht/understanding-lock-files-in-npm-5-4bf615c6cd50"
                target="_blank">ссылка
                на статью</a>.
            </p>
            <p class="article__text">Давайте откроем нашу директорию в vscode.</p>
            <p class="article__text">Первым делом заглянем в файл <span class="erticle__file">package.json</span>.</p>
            <p class="article__text">Нас интересует строка <code>devDependencies</code>. Здесь перечисляются все пакеты,
              которые мы устанавливаем с ключом <code>-D</code> (или можно писать <code>--save-dev</code>, это тоже
              самое!).</p>

            <figure>
              <img class="article__img" src="img/image8.png" width="580" height="326" alt="Файл package.json">
            </figure>

            <p class="article__text">Видим здесь пока только Gulp, что уже неплохо! Продолжим!</p>
          </li>

          <li class="article__item" id="proj">
            <h3 class="article__title">Структура проекта</h3>
            <p class="article__text">Теперь поучимся использовать <b>Gulp</b>. Для этого надо создать <span
                class="article__file">gulpfile.js</span>. Здесь мы и будем писать автоматизацию!</p>

            <figure>
              <img class="article__img" src="img/image7.png" width="580" height="326" alt="Файл gulpfile.js">
            </figure>

            <p class="article__text">Для начала создаем переменную <code>gulp</code> подключаем <b>Gulp</b>:
              <code>var gulp = require('gulp');</code></p>

            <figure>
              <img class="article__img" src="img/image24.png" width="580" height="326" alt="Файл gulpfile.js">
            </figure>

            <p class="article__text">И можно писать первый task!</p>
            <p class="article__text">У нашего <code>gulp</code> вызываем метод <code>task()</code>, куда передаем
              название, в нашем случае это <code>‘css’</code> и колбек-функцию, которая возвращает
              <code>gulp.src()</code>. В метод <code>src</code> мы должны передать путь к нашему файлу стилей.</p>


            <figure>
              <img class="article__img" src="img/image23.png" width="580" height="326" alt="Файл gulpfile.js">
            </figure>

            <p class="article__text">А вот здесь имеет смысл поговорить о структуре нашего проекта, потому как она будет
              несколько отличаться от привычной!</p>

            <p class="article__text">Проект будет разделен на 2 составляющих: Source и Build. В Source мы ведем
              разработку, а в Build компилируется готовый проект.</p>
            <p class="article__text">В корне создаем папку с исходниками <span class="article__file">Source</span>.
              Внутри
              нее папки <span class="article__file">img</span> (изображения), <span class="article__file">js</span>
              (скрипты), <span class="article__file">lib</span> (сторонние скрипты и стили), <span
                class="article__file">fonts</span> (шрифты). И теперь самое интересное! Мы
              не создаем папку со стилями, привычную нам <span class="article__fiel">css</span>, вместо этого мы создаем
              папку <span class="article__file">sass</span>.</p>
            <p class="article__text">C этого момента мы будем использовать препроцессор <b>SASS</b>, а привычный
              <b>CSS</b> будем компилировать при помощи <b>Gulp</b>! </p>
            <p class="article__text">Рядом с всеми этими папками создадим <span class="article__file">index.html</span>
              Внутри папки <span class="article__file">sass</span> создаем <span
                class="article__file">style.scss</span>.
            </p>

            <figure>
              <img class="article__img" src="img/new/img_01.png" width="580" height="326" alt="Файл gulpfile.js">
            </figure>

            <p class="article__text">Ок! Возвращаемся в <span class="article__file">gulpfile.js</span> и пишем в
              <code>gulp.src()</code> путь до наших стилей <code>'Source/sass/style.scss'</code></p>


            <figure>
              <img class="article__img" src="img/new/img_02.png" width="580" height="326" alt="Файл gulpfile.js">
            </figure>
          </li>

          <li class="article__item" id="plugins">
            <h3 class="article__title" id="plugins">Устанавливаем Gulp-плагины</h3>
            <p class="article__text">Для <b>Gulp</b> написано масса плагинов, который помогут нам сделать все рутинную
              работу! Их можно найти на <a class="article__link" href="https://www.npmjs.com/" target="_blank">сайте</a>.
            </p>
            <p class="article__text">Ниже я приведу список того, что нам понадобится:</p>

            <ul class="article__inner-list no-list">
              <li class="article__inner-item">gulp-sass</li>
              <li class="article__inner-item">gulp-plumber</li>
              <li class="article__inner-item">gulp-postcss</li>
              <li class="article__inner-item">gulp-sourcemaps</li>
              <li class="article__inner-item">autoprefixer</li>
              <li class="article__inner-item">browser-sync</li>
            </ul>
            <figure>
              <img class="article__img" src="img/image25.png" width="580" height="326" alt="Сайт Npmjs.com">
            </figure>

            <figure>
              <img class="article__img" src="img/image26.png" width="580" height="326" alt="Сайт Npmjs.com">
            </figure>

            <p class="article__text">Нам надо установить это все!</p>
            <p class="article__text">Идем в консоль. Для начала установим <span class="article__file">gulp-sass</span>
              командой <code>npm install node-sass gulp-sass --save-dev</code></p>

            <figure>
              <img class="article__img" src="img/image10.png" width="500" height="353" alt="Установка Gulp-sass">
            </figure>

            <p class="article__text">Далее <b>gulp-plumber</b>: <code>npm install --save-dev gulp-plumber</code></p>
            <p class="article__text">Следом <b>gulp-postcss</b>: <code>npm install --save-dev gulp-postcss</code></p>
            <p class="article__text">Потом <b>gulp-sourcemaps</b>: <code>npm install --save-dev gulp-sourcemaps</code>
            </p>
            <p class="article__text"><b>Autoprefixer</b>: <code>npm install --save-dev autoprefixer</code></p>
            <p class="article__text">И наконец <b>browser-sync</b>: <code>npm install --save-dev browser-sync</code></p>

            <p class="article__text">Возвращаемся в <b>vscode</b>! Можно заглянуть в <span
                class="article__file">package.json</span> и убедиться, что все установлено так как надо.</p>

            <figure>
              <img class="article__img" src="img/new/img_03.png" width="580" height="326" alt="Файл package.json">
            </figure>
          </li>

          <li class="article__item" id="tasks">
            <h3 class="article__title">Пишем tasks</h3>
            <p class="article__text">Переходим к <span class="article__file">gulpfile.js</span>. Продолжим писать наш
              конфиг! Подключаем пакеты, которые мы только что установили.</p>

            <figure>
              <img class="article__img" src="img/new/img_13.png" width="580" height="326" alt="Файл gulpfile.js">
            </figure>

            <p class="article__text">Вернемся к первому task!</p>

            <figure>
              <img class="article__img" src="img/new/img_05.png" width="580" height="326" alt="Файл gulpfile.js">
            </figure>

            <p class="article__text">Делаем более читаемый вид.</p>

            <figure>
              <img class="article__img" src="img/new/img_06.png" width="580" height="326" alt="Файл gulpfile.js">
            </figure>

            <p class="article__text">Далее пишем следующий task, который будет создавать локальный сервер и следить за
              изменениями наших <code>.html</code> и <code>.scss</code> файлов. И еще дополним первый task.</p>

            <figure>
              <img class="article__img" src="img/new/img_07.png" width="580" height="326" alt="Файл gulpfile.js">
            </figure>

            <p class="article__text">Теперь создадим task, который стартует наш сервер. А колбек-функцией здесь выступит
              метод <code>gulp.series(‘css’, ‘server’);</code></p>

            <figure>
              <img class="article__img" src="img/new/img_08.png" width="580" height="326" alt="Файл gulpfile.js">
            </figure>

            <p class="article__text">Теперь перейдем в <span class="article__file">package.json</span> и немного
              подредактируем <code>"scripts"</code> . Вместо
              <code>"test": "echo \"Error: no test specified\" && exit 1"</code> напишем
              <code>"start": "gulp start"</code>. Таким образом, мы создали скрипт, который будет запускаться командой
              <code>npm start</code>, который в свою очередь, будет запускать task <code>"start"</code> из нашего <span
                class="article__file">gulpfile.js</span>.</p>

            <figure>
              <img class="article__img" src="img/new/img_04.png" width="580" height="326" alt="Файл package.json">
            </figure>
          </li>
          <li class="article__item" id="start">
            <h3 class="article__title">Запускаем сервер</h3>
            <p class="article__text">Давайте перейдем в консоль и попробуем запустить наш скрипт. Пишем:
              <code>npm start</code></p>
            <p class="article__text">Если мы все верно сделали должен запуститься локальный сервер.</p>

            <figure>
              <img class="article__img" src="img/image4.png" width="500" height="353" alt="Запуск сервера">
            </figure>

            <p class="article__text">И автоматически откроется окно браузера (Если не открывается автоматически,
              копируем
              адрес в строке <code>local</code>, у меня это <code>http://localhost:3000</code>, открываем браузер и
              вставляем в строку поиска).</p>

            <figure>
              <img class="article__img" src="img/image21.png" width="580" height="326" alt="Окно браузера">
            </figure>

            <p class="article__text">Страница пустая!? Дело в том, что браузеру пока нечего отображать. Мы создали
              структуру проекта а в файлах разметки и стилях ничего не написали.</p>
            <p class="article__text">Исправи. Возвращаемся в <b>vscode</b>. Открываем <span
                class="article__file">index.html</span>, делаем базовую разметку, подключаем
              стили<code>&lt;link rel="stylesheet" href="css/style.css"&gt;</code>, добавляем
              <code>&lt;h1&gt;Hello world&lt;/h1&gt;</code></p>


            <figure>
              <img class="article__img" src="img/new/img_09.png" width="580" height="326" alt="Файл index.html">
            </figure>

            <p class="article__text">Переходим в папку <span class="article__file">sass</span>. В <span
                class="article__file">style.scss</span> пишем <code>html {background-color: red;}</code> Обратите
              внимание у нас уже появилась папка <span class="article__file">css</span>. Мы ее не создавали, а вот
              <b>Gulp</b> скомпилировал!</p>

            <figure>
              <img class="article__img" src="img/new/img_10.png" width="580" height="326" alt="Файл style.scss">
            </figure>

            <p class="article__text">Кроме того, посмотрим в консоль и увидим, что наш сервер автоматически
              перезагружается.</p>

            <figure>
              <img class="article__img" src="img/image30.png" width="500" height="353" alt="Сервера">
            </figure>

            <p class="article__text">Идем в браузер и перезагрузим нашу страницу.</p>


            <figure>
              <img class="article__img" src="img/image27.png" width="580" height="326" alt="Окно браузера">
            </figure>

            <p class="article__text">Работает! Попробуем поменять цвет.</p>

            <figure>
              <img class="article__img" src="img/new/img_11.png" width="580" height="326" alt="Файл style.scss">
            </figure>

            <p class="article__text">Сохраняем, смотрим в консоль и браузер.</p>

            <figure>
              <img class="article__img" src="img/image28.png" width="500" height="353" alt="Сервера">
            </figure>

            <figure>
              <img class="article__img" src="img/image12.png" width="580" height="326" alt="Окно браузера">
            </figure>

            <p class="article__text">Цвет поменялся автоматически! Поменяем текст...</p>

            <figure>
              <img class="article__img" src="img/new/img_12.png" width="580" height="326" alt="Файл index.html">
            </figure>

            <figure>
              <img class="article__img" src="img/image6.png" width="580" height="326" alt="Окно браузера">
            </figure>

            <p class="article__text">Отлично! Все работает! На этом пока все.</p>

          </li>
        </ul>
      </article>

      <a href="#" class="up-btn" aria-label="К началу страницы">Вверх</a>
    </div>


  </main>
  <footer class="page-footer"></footer>

  <template id="zoom">
    <div class="zoom">
      <button class="close" type="button">Закрыть</button>
      <img class="zoom__img" src="" alt="">
    </div>
  </template>

  <script src="js/script.js"></script>
</body>

</html>